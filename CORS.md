# CORS

Cross-Origin Resource Sharing의 약자로 웹에서 다른 주소로 접근할 때 발생하는 보안 문제를 해결하기 위한 표준 방법이다.

### 동작 방식

1. 브라우저가 HTTP 요청을 보낸다
2. 서버는 요청에 대한 응답을 반환한다
3. 브라우저가 응답을 분석하여 CORS 헤더를 확인한다
4. CORS 헤더가 존재하면 브라우저는 자원에 대한 권한을 검사한다
5. 권한이 허용되면 자원을 사용하고, 그러지 않으면 에러를 발생 시킨다

### CORS 에러가 발생하는 경우

- 출처가 다른 도메인 또는 포트로 리소스 요청을 할 때
- HTTPS에서 HTTP로 리소스 요청을 할 때
- 인증 정보를 포함한 요청을 보낼 때
- 허용되지 않은 메서드를 사용할 때
- 허용되지 않은 헤더를 사용할 때
- 예비 요청에 대한 응답이 없는 경우
- 브라우저가 CORS를 지원하지 않는 경우
- CDN(지리적으로 분산된 서버들을 연결한 네트워크) 등에서 제공하는 리소스를 요청할 때
- 브라우저 설정 문제

### FrontEnd 쪽에서 해결하는 법들

- **인증 정보를 포함한 요청을 보낼 때**의 경우는 프론트에서도 처리해줘야 할 한 가지가 있다. 바로 withCredentials 옵션을 추가 하기
- mkcert로 로컬 서버를 HTTPS로 만들어 **HTTPS에서 HTTP로 리소스 요청을 할 때** 같은 경우를 해결할 수 있다
- **출처가 다른 도메인 또는 포트로 리소스 요청을 할 때** https://cors-anywhere/herokuapp.com 같이 남이 만든 프록시 서버 이용하기
- 그냥 다 무시하고 싶을 때는 크롬에서 CORS를 다 무시할 수 있는 방법이 있다 (보안이 매우 낮으므로 개발 목적에서만 사용하자)
  1. 원하는 위치에 빈 디렉토리를 하나 만들어준다 (mkdir chrome-no-cors)
  2. 다음의 명령어를 실행한다 (open -na 'Google Chrome' --args --user-data-dir=${path} --disable-web-security)
